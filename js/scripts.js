let answers={commute:{answerKm:0,percents:{pied:0,bus:0,covoiturage:0,voiture:0,metro:0,tramway:0,TER:0,TGV:0},co2Value:0},avion:{answers:{court:0,moyen:0,long:0},co2Value:0},mails:{answer:0,co2Value:0},cloud:{answer:0,co2Value:0},totalCo2:0};function setAllToZero(){let e=document.getElementsByTagName("input");for(i=0;i<e.length;i++)e[i].value=0}function bindInput(e){let t=document.getElementsByName(e);for(let n=0;n<t.length;n++)"radio"==t[0].type?t[n].onclick=function(){let t=calculate(e);answers[e]=json(this.value,t);var n="reponse-"+e;document.getElementById(n).innerText=t+"g de COÂ²",console.log("Votre nouveau total de C02 est : ",totalCo2()),answers.totalCo2=totalCo2()}:"number"==t[0].type&&(t[n].onchange=function(){let t=calculate(e);"commute"==e?(elements=document.getElementsByName("commute"),answers[e]={answerKm:parseIntOrZero(elements[0].value),percents:{pied:parseIntOrZero(elements[1].value),bus:parseIntOrZero(elements[2].value),covoiturage:parseIntOrZero(elements[3].value),voiture:parseIntOrZero(elements[4].value),metro:parseIntOrZero(elements[5].value),tramway:parseIntOrZero(elements[6].value),TER:parseIntOrZero(elements[7].value),TGV:parseIntOrZero(elements[8].value)},co2Value:t},console.log("La consommation pour le trajet est : ",t),console.log("Answers :",answers)):"avion"==e?(elements=document.getElementsByName("avion"),answers[e]={answers:{court:parseIntOrZero(elements[0].value),moyen:parseIntOrZero(elements[1].value),long:parseIntOrZero(elements[2].value)},co2Value:t},console.log("La consommation annuelle pour l'avion est : ",t),console.log("Answers :",answers)):(elements=document.getElementsByName(e),answers[e]=json(this.value,t),console.log("Consommation pour "+e+" : ",t),console.log("Answers : ",answers)),answers.totalCo2=totalCo2(),labelTotal=document.getElementById("totalCo2"),labelTotal.innerHTML=answers.totalCo2.toLocaleString()})}function parseIntOrZero(e){let t=parseInt(e);return Number.isNaN(t)&&(t=0),t}function calculate(e){let t=0;document.getElementsByName(e);switch(elements=document.getElementsByName(e),e){case"commute":let n=parseIntOrZero(elements[0].value);console.log(n),t=502*n*(parseIntOrZero(elements[1].value)/100*0+parseIntOrZero(elements[2].value)/100*104+parseIntOrZero(elements[3].value)/100*46+parseIntOrZero(elements[4].value)/100*138+parseIntOrZero(elements[5].value)/100*2.5+parseIntOrZero(elements[6].value)/100*2.2+parseIntOrZero(elements[7].value)/100*24.81+parseIntOrZero(elements[8].value)/100*1.73),t=parseInt(t);break;case"avion":t=258*parseIntOrZero(elements[0].value)+187*parseIntOrZero(elements[1].value)+152*parseIntOrZero(elements[2].value);break;case"mails":t=4*parseIntOrZero(elements[0].value)*251;break;case"cloud":t=2e3*parseIntOrZero(elements[0].value)}return t}function json(e,t){return{answer:e,co2Value:parseInt(t)}}function totalCo2(){let e=0;for(var t of Object.keys(answers))e+=parseIntOrZero(answers[t].co2Value);return e}function getAllUniqueInputNames(){var e;inputs=document.getElementsByTagName("input"),e=[];for(var t=0;t<inputs.length;t++)e.push(inputs[t].name);return[...new Set(e)]}function writeResultsToFile(){var e=new Blob([JSON.stringify(answers)],{type:"text/plain"}),t=document.createElement("a");t.style.display="none",t.download="results.json",t.href=URL.createObjectURL(e),t.click()}function bindInputs(e){for(var t of e)bindInput(t),console.log("Bound input : ",t)}bindInputs(getAllUniqueInputNames());